{%extends 'base.html' %}
{% load static %}
{% block content%}
<script
src="https://code.jquery.com/jquery-3.5.1.min.js"
integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
crossorigin="anonymous"></script>
<script src="{% static 'js/bin/jquery.waypoints.min.js' %}"></script>
<script src="{% static 'js/bin/infinite.min.js' %}"></script>

<section class="home">

 
  {%include 'search.html'%}
    <!-- Listings start-->
    <div class="titles">
     <h2>{{ title }}</h2>
    </div>

    {% if not prod%}
    <h5>No products found</h5>
    {% endif %}


   
    <div class="wrapCard row infinite-container ">
      {% for p in prod%}
    <!-- Card -->
    <div class="pCard col s6 m3 infinite-item">
      <div class="pCard__image " >
        <a href="{% url 'productMS:single-product' p.slug %}" class="pCard__imageWrap">
        <img src="{{p.photo.url}}">
        </a>
        {%if p.premium %}
        <div class="pCard__imageTick">
          <i class="material-icons">check_circle</i>
          <p>{{p.warranty}} months warranty included</p>
        </div>
        {% endif %}
      </div>
      <a href="{% url 'productMS:single-product' p.slug %}">
        {% if not p.sold %}
        <h5>{{p.name}}</h5>
        {% else %}
        <h5>{{p.name}} <span style="color: #DC3544;">(Sold Out)</span></h5>
        {% endif %}
      <h4>Rs. {{p.price}}</h4>
     </a>
    </div>
    <!-- End of Card -->

    {%endfor%}
 
 
     
   </div>
   
    <!-- Listings end-->


  <div class="infinite-loading" style="display: none;">
    Loading...
  </div>

  {% if page_obj.has_next %}
    <a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}">More</a>
  {% endif %}


   

   </section>

   <script>
    var infinite = new Waypoint.Infinite({
      element: $('.infinite-container')[0],
      onBeforePageLoad: function () {
        $('.loading').show();
      },
      onAfterPageLoad: function ($items) {
        $('.loading').hide();
      }
    });
  </script>



  {%endblock content%}